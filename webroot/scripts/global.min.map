{"version":3,"file":"/Users/mensch/Sites/epubster/webroot/scripts/global.min.js","sources":["scripts/global.js"],"names":["slugify","slug","toLowerCase","replace","sectionTabs","currentTab","$","jStorage","get","tab","document","on","event","popover","preventDefault","this","set","attr","editor","deactivate","setupMediumEditor","clickedElement","href","response","tabTitle","val","tabSlug","insertBefore","append","count","match","parseInt","alteredHref","remove","removeClass","error","emptyInput","each","index","element","formGroup","parents","addClass","focus","closest","show","sectionSort","sortable","placeholder","stop","sectionOrder","id","substr","order","push","JSON","stringify","hide","disableSelection","sectionDelete","parse","parent","fadeOut","generateEPUB","ajax","url","SITE_URL","beforeSend","opts","lines","length","width","radius","corners","rotate","direction","color","speed","trail","shadow","hwaccel","className","zIndex","top","left","target","getElementById","spinner","Spinner","spin","success","epub","html","fadeIn","cleanFootnote","footnote","undefined","str","value","Index","rangy","init","button","createElement","innerHTML","onclick","onClick","bind","classApplier","createCssClassApplier","elementTagName","normalize","Notes","previewFootnote","preview","text","type","boundary","offset","css","height","saveSelection","i","len","ranges","sel","window","getSelection","getRangeAt","rangeCount","restoreSelection","savedSel","removeAllRanges","addRange","MediumEditor","buttons","buttonLabels","forcePlainText","extensions","note","setupEditors","currentEditor","toggleClass","trim","markItUp","mySettings","hasClass","activate","savedSelection","footnoteValue","fn","extend","insertAtCaret","myValue","selection","createRange","selectionStart","startPos","endPos","selectionEnd","scrollTop","substring","e","is","has","prototype","node","toggleSelection","getButton","checkState","classList","add","toolbarActions","style","display","keepToolbarAlive","showToolbarActions","anchorNode","parentNode","nodeValue","execCommand","keyCode","insertHTMLAtCursor","doubleWrappedFootnotes","replaceWith","hideToolbarActions","first","ready","selector"],"mappings":"AAkCA,QAASA,SAAQC,GACf,MAAOA,GACAC,cACAC,QAAQ,SAAS,IACjBA,QAAQ,WAAW,IACnBA,QAAQ,MAAM,KAGvB,QAASC,eACP,GAAIC,GAAaC,EAAEC,SAASC,IAAI,eAC5BH,IACFC,EAAE,yBAAyBD,EAAW,MAAMI,IAAI,QAElDH,EAAEI,UAAUC,GAAG,QAAS,0DAA2D,SAAUC,GAC3FN,EAAE,iBAAiBO,QAAQ,WAC3BD,EAAME,iBACNR,EAAES,MAAMN,IAAI,QACZH,EAAEC,SAASS,IAAI,eAAgBV,EAAES,MAAME,KAAK,SAE5CC,OAAOC,aACPC,sBAIFd,EAAE,mCAAmCK,GAAG,QAAS,SAAUC,GACzD,GAAIS,GAAiBf,EAAES,MACnBO,EAAOD,EAAeJ,KAAK,OAC/BX,GAAEE,IAAIc,EAAM,SAASC,GACnB,GAAIC,GAAWlB,EAAE,sBAAuBiB,GAAUE,MAC9CC,EAAU1B,QAAQwB,EACtBlB,GAAE,yBAAyBoB,EAAQ,KAAKF,EAAS,QAAQG,aAAa,yBACtErB,EAAE,6BAA6BsB,OAAOL,EACtC,IAAId,GAAM,YAAYiB,CACtBpB,GAAE,yBAAyBG,EAAI,MAAMA,IAAI,QAEzCS,OAAOC,aACPC,mBAEA,IAAIS,GAAQP,EAAKQ,MAAM,OACvB,IAAID,EACF,GAAIA,GAAQE,SAASF,EAAM,IAAI,CAEjC,IAAIG,GAAcV,EAAKnB,QAAQ,OAAQ0B,EACvCR,GAAeJ,KAAK,OAAQe,KAE9BpB,EAAME,mBAGRR,EAAE,0BAA0BK,GAAG,SAAU,WACvC,GAAIF,GAAM,YAAYH,EAAES,MAAMU,KAC9BnB,GAAE,yBAAyBG,EAAI,MAAMA,IAAI,QAEzCS,OAAOC,aACPC,sBAIFd,EAAE,yCAAyCK,GAAG,QAAS,SAASC,GAC9DN,EAAE,0BAA0B2B,SAC5B3B,EAAE,iBAAiB4B,YAAY,eAAeA,YAAY,aAAaA,YAAY,eAEnF,IAAIC,GAAQ,EACRC,EAAa,EAiBjB,IAhBA9B,EAAE,mBAAoB,kBAAkB+B,KAAK,SAASC,EAAOC,GAC3D,GAAIC,GAAYlC,EAAES,MAAM0B,QAAQ,cAChCD,GAAUE,SAAS,gBAEC,IAAjBpC,EAAES,MAAMU,OACTe,EAAUE,SAAS,aAAad,OAAO,yDACzB,IAAVU,IACFF,EAAa9B,EAAES,OAEL,GAAToB,GAAa7B,EAAES,MAAM4B,QACxBR,EAAQ,GAERK,EAAUE,SAAS,eAAed,OAAO,oEAIhC,GAATO,EAAY,CACVC,GACFA,EAAWO,OAEb,IAAIlC,GAAM2B,EAAWQ,QAAQ,aAAa3B,KAAK,KAC/CX,GAAE,0BAA4BG,EAAM,MAAMA,IAAI,QAC9CH,EAAE,0BAA0BuC,OAC5BjC,EAAME,oBAcZ,QAASgC,eACPxC,EAAG,oBAAqByC,UACtBC,YAAa,qBACbC,KAAO,WACL,GAAIC,KACJ5C,GAAE,yBAAyB+B,KAAK,SAASC,EAAOC,GAC9C,GAAIY,GAAK7C,EAAEiC,GAAStB,KAAK,MAAMmC,OAAO,GAClCC,GAASF,GAAKA,EAAIE,MAAQf,EAAM,EACpCY,GAAaI,KAAKD,IAEpB,IAAIH,GAAeK,KAAKC,UAAUN,EAClC5C,GAAE,8BAA8BmB,IAAIyB,GACpC5C,EAAE,oCAAoCuC,OACtCvC,EAAE,0CAA0CmD,UAGhDnD,EAAG,oBAAqBoD,mBAExBpD,EAAE,oCAAoCK,GAAG,QAAS,SAASC,GACzD,GAAIuC,GAAK7C,EAAES,MAAME,KAAK,MAAMmC,OAAO,IAC/BO,EAAgBrD,EAAE,+BAA+BmB,KACrD,IAAIkC,EACF,GAAIA,GAAgBJ,KAAKK,MAAMD,OAE/B,IAAIA,KAENA,GAAcL,KAAKH,EACnB,IAAIQ,GAAgBJ,KAAKC,UAAUG,EACnCrD,GAAE,+BAA+BmB,IAAIkC,GAErCrD,EAAES,MAAM8C,SAASC,QAAQ,OAAQ,WAC/BxD,EAAES,MAAMkB,WAEVrB,EAAME,mBAIV,QAASiD,cAAaZ,GACpB7C,EAAE0D,MACAC,IAAKC,SAAS,qBAAqBf,EACnCgB,WAAa,WACX,GAAIC,IACFC,MAAO,GACPC,OAAQ,EACRC,MAAO,EACPC,OAAQ,EACRC,QAAS,EACTC,OAAQ,EACRC,UAAW,EACXC,MAAO,OACPC,MAAO,EACPC,MAAO,GACPC,QAAQ,EACRC,SAAS,EACTC,UAAW,UACXC,OAAQ,IACRC,IAAK,OACLC,KAAM,QAEJC,EAAS3E,SAAS4E,eAAe,kBACjCC,EAAU,GAAIC,SAAQpB,GAAMqB,KAAKJ,IAEvCK,QAAU,SAASnE,GACbA,GACFjB,EAAE,mBAAmBwD,QAAQ,OAAQ,WACnC6B,KAAOpE,EAAS,QAChBjB,EAAES,MAAM6E,KAAK,IAAIhE,OAAO,+BAA+BsC,SAAS,2CAA2C2B,OAAO,aAO5H,QAASC,eAAcC,GACrB,MAAiBC,UAAbD,EACKA,EAAS5F,QAAQ,eAAgB,SAAS8F,EAAKC,GAAS,MAAOA,KADxE,OAMF,QAASC,SACPC,MAAMC,OAENtF,KAAKuF,OAAS5F,SAAS6F,cAAc,UACrCxF,KAAKuF,OAAOrB,UAAY,uBACxBlE,KAAKuF,OAAOE,UAAY,mCACxBzF,KAAKuF,OAAOG,QAAU1F,KAAK2F,QAAQC,KAAK5F,MAExCA,KAAK6F,aAAeR,MAAMS,sBAAsB,iBAC9CC,eAAgB,OAChBC,WAAW,IAqBf,QAASC,SACPjG,KAAKuF,OAAS5F,SAAS6F,cAAc,UACrCxF,KAAKuF,OAAOrB,UAAY,uBACxBlE,KAAKuF,OAAOE,UAAY,gCACxBzF,KAAKuF,OAAOG,QAAU1F,KAAK2F,QAAQC,KAAK5F,MAEY,IAAhDT,EAAE,mCAAmCgE,QACvChE,EAAE,QAAQsB,OAAO,qUA2ErB,QAASqF,mBACP3G,EAAGI,UAAWC,GAAG,wBAAyB,gBAAiB,SAASC,GAClE,GAAIsG,GAAU5G,EAAE,6CACZyF,EAAWD,cAAcxF,EAAE,2BAA4BS,MAAMoG,OAEjE,IAAmB,eAAfvG,EAAMwG,KAAuB,CAC/BF,EAAQxE,SAAS,uCACjBpC,EAAE,yFAAyFsB,OAAO,kCAAkCmE,EAAS,UAE7I,IAAIsB,GAAW/G,EAAES,MAAMuG,QACvBJ,GAAQK,KACNpC,IAAOkC,EAASlC,KAAO+B,EAAQM,SAAWlH,EAAES,MAAMyG,UAAU,IAC5DpC,KAAQiC,EAASjC,MAAS8B,EAAQ3C,QAAUjE,EAAES,MAAMwD,SAAY,QAIlE2C,GAAQhF,YAAY,uCACpB5B,EAAE,+GAA+G2B,WAOvH,QAASwF,iBACP,GAAIC,GACAC,EACAC,EACAC,EAAMC,OAAOC,cACjB,IAAIF,EAAIG,YAAcH,EAAII,WAAY,CAElC,IADAL,KACKF,EAAI,EAAGC,EAAME,EAAII,WAAgBN,EAAJD,EAASA,GAAK,EAC5CE,EAAOtE,KAAKuE,EAAIG,WAAWN,GAE/B,OAAOE,GAEX,MAAO,MAGT,QAASM,kBAAiBC,GACxB,GAAIT,GACAC,EACAE,EAAMC,OAAOC,cACjB,IAAII,EAEA,IADAN,EAAIO,kBACCV,EAAI,EAAGC,EAAMQ,EAAS7D,OAAYqD,EAAJD,EAASA,GAAK,EAC7CG,EAAIQ,SAASF,EAAST,IAKhC,QAAStG,qBACPF,OAAS,GAAIoH,cAAa,gBACxBC,SAAU,OAAQ,SAAU,QAAS,OAAQ,SAAU,cAAe,gBAAiB,UAAW,UAAW,OAAQ,SACrHC,aAAe,cACfC,gBAAgB,EAChBzF,YAAc,+CACd0F,YACEC,KAAQ,GAAI3B,OACZ1E,MAAS,GAAI6D,UAKnB,QAASyC,gBACP,GAAIC,GAAgBvI,EAAEC,SAASC,IAAI,iBAEb,gBAAlBqI,IACFvI,EAAE,2DAA2DwI,YAAY,UACzExI,EAAE,wBAAwBwI,YAAY,aAGP,IAA7BxI,EAAE,gBAAgBgE,SACpBlD,oBAEAd,EAAE,gBAAgBK,GAAG,QAAS,SAASC,GACrCN,EAAE,gBAAgB+B,KAAK,SAASC,EAAOC,GACrCjC,EAAE,4BAA4BuC,MAC9B,IAAIM,GAAK7C,EAAEiC,GAAStB,KAAK,MAAMmC,OAAO,GAClC+D,EAAO7G,EAAEiC,GAASqD,OAAOmD,MAC7BzI,GAAE,aAAa6C,GAAI1B,IAAI0F,QAI7B7G,EAAE,oBAAoB0I,SAASC,YAE/B3I,EAAE,yBAAyBK,GAAG,QAAS,SAASC,GAC9CN,EAAE,2DAA2DwI,YAAY,UACzExI,EAAE,wBAAwBwI,YAAY,YAElCxI,EAAES,MAAMmI,SAAS,YACnBhI,OAAOiI,WACP7I,EAAEC,SAASS,IAAI,iBAAkB,aAEjCV,EAAE,gBAAgB+B,KAAK,SAASC,EAAOC,GACrC,GAAIY,GAAK7C,EAAEiC,GAAStB,KAAK,MAAMmC,OAAO,GAClC+D,EAAO7G,EAAEiC,GAASqD,OAAOmD,MAC7BzI,GAAE,aAAa6C,GAAI1B,IAAI0F,KAEzBjG,OAAOC,aACPb,EAAEC,SAASS,IAAI,iBAAkB,eAEnCJ,EAAME,mBA7aV,GAAI6E,MACAzE,OACAkI,eACArD,SACAsD,aAEJ/I,GAAEgJ,GAAGC,QACLC,cAAe,SAASC,GACtB,MAAO1I,MAAKsB,KAAK,SAASqF,GACxB,GAAIhH,SAASgJ,UAAW,CAEtB3I,KAAK4B,OACL,IAAIkF,GAAMnH,SAASgJ,UAAUC,aAC7B9B,GAAIV,KAAOsC,EACX1I,KAAK4B,YAEF,IAAI5B,KAAK6I,gBAAyC,KAAvB7I,KAAK6I,eAAuB,CAE1D,GAAIC,GAAW9I,KAAK6I,eAChBE,EAAS/I,KAAKgJ,aACdC,EAAYjJ,KAAKiJ,SACrBjJ,MAAKmF,MAAQnF,KAAKmF,MAAM+D,UAAU,EAAGJ,GAAUJ,EAAQ1I,KAAKmF,MAAM+D,UAAUH,EAAO/I,KAAKmF,MAAM5B,QAC9FvD,KAAK4B,QACL5B,KAAK6I,eAAiBC,EAAWJ,EAAQnF,OACzCvD,KAAKgJ,aAAeF,EAAWJ,EAAQnF,OACvCvD,KAAKiJ,UAAYA,MAEjBjJ,MAAKmF,OAASuD,EACd1I,KAAK4B,aAiGXrC,EAAE,mBAAmBK,GAAG,QAAS,SAAUuJ,GACzC5J,EAAE,iBAAiB+B,KAAK,WACtB,MAAK/B,GAAES,MAAMoJ,GAAGD,EAAE7E,SAA4C,IAAjC/E,EAAES,MAAMqJ,IAAIF,EAAE7E,QAAQf,QAAuD,IAAvChE,EAAE,YAAY8J,IAAIF,EAAE7E,QAAQf,OAA/F,WACEhE,GAAES,MAAMF,QAAQ,YAoGtBsF,MAAMkE,UAAU3D,QAAU,SAAS4D,GACjCvJ,KAAK6F,aAAa2D,mBAGpBpE,MAAMkE,UAAUG,UAAY,WAC1B,MAAOzJ,MAAKuF,QAGdH,MAAMkE,UAAUI,WAAa,SAAUH,GACrC,GAAIA,GAAOhK,EAAEgK,EACTA,GAAKpB,SAAS,kBAChBnI,KAAKuF,OAAOoE,UAAUC,IAAI,gCAiB9B3D,MAAMqD,UAAU3D,QAAU,SAAS4D,GACoB,IAAjDhK,EAAE,oCAAoCgE,SACxChE,EAAE,0BAA0BsB,OAAO,uHACsB,IAArDtB,EAAE,0CAA0CmB,OAAiC,KAAlB4H,eAC7D/I,EAAE,0CAA0CmB,IAAI4H,gBAIpDD,eAAiB3B,gBAEjBvG,OAAO0J,eAAeC,MAAMC,QAAU,OACtCxK,EAAE,oCAAoCuC,OACtC3B,OAAO6J,kBAAmB,EAC1BzK,EAAE,0CAA0CqC,QAE5CrC,EAAE,sCAAsCK,GAAG,QAAS,SAAUC,GAC5DA,EAAME,iBACNI,OAAO8J,qBACP1K,EAAE,oCAAoCmD,OACtCnD,EAAE,0CAA0CmB,IAAI,IAEhDyG,iBAAiBkB,eACjB,IAAIrD,GAAWrF,SAASqH,eAAekD,WAAWC,UAClD,IAAI5K,EAAEyF,GAAUmD,SAAS,gBAAiB,CACxC,GAAI/B,GAAOzG,SAASqH,eAAekD,WAAWE,SAC9CpF,GAAS9D,SACTvB,SAAS0K,YAAY,cAAc,EAAOjE,MAI9C7G,EAAE,0CAA0CK,GAAG,QAAS,SAAUC,GAChE,GAAsB,KAAlBA,EAAMyK,QAAgB,CACxBzK,EAAME,iBACNR,EAAEyF,UAAU9D,SACZiG,iBAAiBkB,eACjB,IAAIlD,GAAQ5F,EAAES,MAAMU,KACpB,IAAIyE,EAAO,CACToF,mBAAmB,8BAA8B5K,SAASqH,eAAe,6CAA6C7B,EAAM,mBAAmB,EAE/I,IAAIqF,GAAyBjL,EAAE,8BACO,KAAlCiL,EAAuBjH,QACzBhE,EAAE,+BAA+B+B,KAAK,SAASC,EAAOC,GACpDjC,EAAES,MAAM8C,SAAS2H,YAAYlL,EAAES,SAIrCG,OAAOuK,qBACPnL,EAAE,oCAAoCmD,OACtCnD,EAAE,0CAA0CmB,IAAI,QAKtDuF,MAAMqD,UAAUG,UAAY,WAC1B,MAAOzJ,MAAKuF,QAGdU,MAAMqD,UAAUI,WAAa,SAAUH,GACrC,GAAIA,GAAOhK,EAAEgK,EACTA,GAAKpB,SAAS,mBACClD,SAAbD,UAAuC,OAAbA,UAAkC,KAAbA,YACjDA,SAAWzF,EAAE,2BAA4BgK,IAE3CjB,cAAgB/I,EAAE,2BAA4BgK,GAAMoB,QAAQvE,OAC5DkC,cAAgBvD,cAAcuD,eAC9B/I,EAAE,0CAA0CmB,IAAI4H,eAEhDtI,KAAKuF,OAAOoE,UAAUC,IAAI,iCA8G9BrK,EAAEI,UAAUiL,MAAM,WAChB/C,eACAxI,cACA0C,cACAmE,kBAEA3G,EAAE,QAAQO,SACR+K,SAAU,kBACVhG,MAAK","sourceRoot":"./../"}