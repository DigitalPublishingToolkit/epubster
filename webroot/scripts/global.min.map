{"version":3,"file":"/Users/mensch/Sites/epubster/webroot/scripts/global.min.js","sources":["scripts/global.js"],"names":["slugify","slug","toLowerCase","replace","sectionTabs","currentTab","$","jStorage","get","tab","document","on","event","popover","preventDefault","this","set","attr","editor","deactivate","setupMediumEditor","clickedElement","href","response","tabTitle","val","tabSlug","insertBefore","append","count","match","parseInt","alteredHref","remove","removeClass","error","emptyInput","each","index","element","formGroup","parents","addClass","focus","closest","show","sectionSort","sortable","placeholder","stop","sectionOrder","id","substr","order","push","JSON","stringify","hide","disableSelection","sectionDelete","parse","parent","fadeOut","generateEdition","generateEPUB","download","ajax","url","SITE_URL","beforeSend","opts","lines","length","width","radius","corners","rotate","direction","color","speed","trail","shadow","hwaccel","className","zIndex","top","left","fadeIn","css","spinner","Spinner","spin","target","getElementById","success","epub","window","location","html","cleanFootnote","footnote","undefined","str","value","Person","rangy","init","button","createElement","innerHTML","onclick","onClick","bind","classApplier","createCssClassApplier","elementTagName","normalize","Index","Notes","previewFootnote","preview","text","type","boundary","offset","height","saveSelection","i","len","ranges","sel","getSelection","getRangeAt","rangeCount","restoreSelection","savedSel","removeAllRanges","addRange","MediumEditor","buttons","buttonLabels","forcePlainText","extensions","note","person","setupEditors","currentEditor","toggleClass","trim","markItUp","mySettings","hasClass","activate","savedSelection","footnoteValue","fn","extend","insertAtCaret","myValue","selection","createRange","selectionStart","startPos","endPos","selectionEnd","scrollTop","substring","e","is","has","prototype","node","toggleSelection","getButton","checkState","classList","add","toolbarActions","style","display","keepToolbarAlive","showToolbarActions","anchorNode","parentNode","nodeValue","execCommand","keyCode","insertHTMLAtCursor","doubleWrappedFootnotes","replaceWith","hideToolbarActions","first","ready","selector"],"mappings":"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","sourceRoot":"./../"}