{"version":3,"file":"global.min.js","sources":["global.js"],"names":["slugify","slug","toLowerCase","replace","sectionTabs","currentTab","$","jStorage","get","tab","currentSectionTab","document","on","event","parent","this","parents","popover","preventDefault","attr","set","editor","deactivate","setupMediumEditor","clickedElement","href","response","tabTitle","val","tabSlug","insertBefore","append","count","match","parseInt","alteredHref","remove","removeClass","error","emptyInput","each","index","element","formGroup","addClass","focus","closest","show","sectionSort","sortable","placeholder","stop","sectionOrder","id","substr","order","push","JSON","stringify","hide","disableSelection","sectionDelete","parse","fadeOut","generateEdition","generateEPUB","download","ajax","url","SITE_URL","beforeSend","opts","lines","length","width","radius","corners","rotate","direction","color","speed","trail","shadow","hwaccel","className","zIndex","top","left","fadeIn","css","spinner","Spinner","spin","target","getElementById","success","epub","window","location","html","cleanFootnote","footnote","undefined","str","value","Person","rangy","init","button","createElement","innerHTML","onclick","onClick","bind","classApplier","createCssClassApplier","elementTagName","normalize","Index","Notes","previewFootnote","preview","type","boundary","offset","height","saveSelection","i","len","ranges","sel","getSelection","getRangeAt","rangeCount","restoreSelection","savedSel","removeAllRanges","addRange","MediumEditor","buttons","buttonLabels","forcePlainText","cleanPastedHTML","extensions","note","person","copyTextfield","text","trim","setupEditors","currentEditor","toggleClass","off","hasClass","activate","savedSelection","footnoteValue","fn","extend","insertAtCaret","myValue","selection","createRange","selectionStart","startPos","endPos","selectionEnd","scrollTop","substring","e","is","has","prototype","node","toggleSelection","getButton","checkState","classList","add","toolbarActions","style","display","keepToolbarAlive","showToolbarActions","anchorNode","parentNode","nodeValue","execCommand","insertHTMLAtCursor","doubleWrappedFootnotes","replaceWith","hideToolbarActions","first","ready","selector"],"mappings":"AAkCA,QAASA,SAAQC,GACf,MAAOA,GACAC,cACAC,QAAQ,SAAS,IACjBA,QAAQ,WAAW,KACnBA,QAAQ,MAAM,KAGvB,QAASC,eACP,GAAIC,GAAaC,EAAEC,SAASC,IAAI,eAC5BH,IACFC,EAAE,yBAAyBD,EAAW,MAAMI,IAAI,OAGlD,IAAIC,GAAoBJ,EAAEC,SAASC,IAAI,uBACnCE,IACFJ,EAAE,yBAAyBI,EAAkB,MAAMD,IAAI,QAGzDH,EAAEK,UAAUC,GAAG,QAAS,0DAA2D,SAAUC,GAC3F,GAAIC,GAASR,EAAES,MAAMC,QAAQ,KAC7BV,GAAE,iBAAiBW,QAAQ,WAC3BJ,EAAMK,iBACNZ,EAAES,MAAMN,IAAI,QAEc,iBAAtBK,EAAOK,KAAK,MACdb,EAAEC,SAASa,IAAI,uBAAwBd,EAAES,MAAMI,KAAK,SAEpDb,EAAEC,SAASa,IAAI,eAAgBd,EAAES,MAAMI,KAAK,SAG1CE,QACFA,OAAOC,aAETC,sBAGFjB,EAAE,mCAAmCM,GAAG,QAAS,SAAUC,GACzD,GAAIW,GAAiBlB,EAAES,MACnBU,EAAOD,EAAeL,KAAK,OAC/Bb,GAAEE,IAAIiB,EAAM,SAASC,GACnB,GAAIC,GAAWrB,EAAE,sBAAuBoB,GAAUE,MAC9CC,EAAU7B,QAAQ2B,EACtBrB,GAAE,yBAAyBuB,EAAQ,KAAKF,EAAS,QAAQG,aAAa,yBACtExB,EAAE,6BAA6ByB,OAAOL,EACtC,IAAIjB,GAAM,YAAYoB,CACtBvB,GAAE,yBAAyBG,EAAI,MAAMA,IAAI,QAEzCY,OAAOC,aACPC,mBAEA,IAAIS,GAAQP,EAAKQ,MAAM,OACvB,IAAID,EACF,GAAIA,GAAQE,SAASF,EAAM,IAAI,CAEjC,IAAIG,GAAcV,EAAKtB,QAAQ,OAAQ6B,EACvCR,GAAeL,KAAK,OAAQgB,KAE9BtB,EAAMK,mBAGRZ,EAAE,0BAA0BM,GAAG,SAAU,WACvC,GAAIH,GAAM,YAAYH,EAAES,MAAMa,KAC9BtB,GAAE,yBAAyBG,EAAI,MAAMA,IAAI,QAEzCY,OAAOC,aACPC,sBAIFjB,EAAE,yCAAyCM,GAAG,QAAS,SAASC,GAC9DP,EAAE,0BAA0B8B,SAC5B9B,EAAE,iBAAiB+B,YAAY,eAAeA,YAAY,aAAaA,YAAY,eAEnF,IAAIC,GAAQ,EACRC,EAAa,EAiBjB,IAhBAjC,EAAE,mBAAoB,kBAAkBkC,KAAK,SAASC,EAAOC,GAC3D,GAAIC,GAAYrC,EAAES,MAAMC,QAAQ,cAChC2B,GAAUC,SAAS,gBAEC,IAAjBtC,EAAES,MAAMa,OACTe,EAAUC,SAAS,aAAab,OAAO,yDACzB,IAAVU,IACFF,EAAajC,EAAES,OAEL,GAATuB,GAAahC,EAAES,MAAM8B,QACxBP,EAAQ,GAERK,EAAUC,SAAS,eAAeb,OAAO,oEAIhC,GAATO,EAAY,CACVC,GACFA,EAAWM,OAEb,IAAIpC,GAAM8B,EAAWO,QAAQ,aAAa3B,KAAK,KAC/Cb,GAAE,0BAA4BG,EAAM,MAAMA,IAAI,QAC9CH,EAAE,0BAA0ByC,OAC5BlC,EAAMK,oBAcZ,QAAS8B,eACP1C,EAAG,oBAAqB2C,UACtBC,YAAa,qBACbC,KAAO,WACL,GAAIC,KACJ9C,GAAE,yBAAyBkC,KAAK,SAASC,EAAOC,GAC9C,GAAIW,GAAK/C,EAAEoC,GAASvB,KAAK,MAAMmC,OAAO,GAClCC,GAASF,GAAKA,EAAIE,MAAQd,EAAM,EACpCW,GAAaI,KAAKD,IAEpB,IAAIH,GAAeK,KAAKC,UAAUN,EAClC9C,GAAE,8BAA8BsB,IAAIwB,GACpC9C,EAAE,oCAAoCyC,OACtCzC,EAAE,0CAA0CqD,UAGhDrD,EAAG,oBAAqBsD,mBAExBtD,EAAE,oCAAoCM,GAAG,QAAS,SAASC,GACzD,GAAIwC,GAAK/C,EAAES,MAAMI,KAAK,MAAMmC,OAAO,IAC/BO,EAAgBvD,EAAE,+BAA+BsB,KACrD,IAAIiC,EACF,GAAIA,GAAgBJ,KAAKK,MAAMD,OAE/B,IAAIA,KAENA,GAAcL,KAAKH,EACnB,IAAIQ,GAAgBJ,KAAKC,UAAUG,EACnCvD,GAAE,+BAA+BsB,IAAIiC,GAErCvD,EAAES,MAAMD,SAASiD,QAAQ,OAAQ,WAC/BzD,EAAES,MAAMqB,WAEVvB,EAAMK,mBAIV,QAAS8C,mBACP1D,EAAE,kBAAkBM,GAAG,QAAS,SAASC,GACvC,GAAIwC,GAAK/C,EAAE,cAAcsB,KACzBqC,cAAaZ,GAAI,GACjBxC,EAAMK,mBAIV,QAAS+C,cAAaZ,EAAIa,GACxB5D,EAAE6D,MACAC,IAAKC,SAAS,qBAAqBhB,EACnCiB,WAAa,WACX,GAAIC,IACFC,MAAO,GACPC,OAAQ,EACRC,MAAO,EACPC,OAAQ,EACRC,QAAS,EACTC,OAAQ,EACRC,UAAW,EACXC,MAAO,OACPC,MAAO,EACPC,MAAO,GACPC,QAAQ,EACRC,SAAS,EACTC,UAAW,UACXC,OAAQ,IACRC,IAAK,OACLC,KAAM,OAER,IAAIrB,EACF5D,EAAE,2BAA2BkF,OAAO,QACpClF,EAAE,cAAcmF,IAAI,WAAY,cAEhC,IAAIC,GAAU,GAAIC,SAAQpB,GAAMqB,KAAKC,GACjCA,EAASlF,SAASmF,eAAe,mBAGzCC,QAAU,SAASrE,GACbA,IACEwC,GACF8B,KAAOtE,EAAS,QAChBuE,OAAOC,SAAS/F,QAAQ6F,MACxB1F,EAAE,2BAA2ByD,QAAQ,OAAQ,WAC3CzD,EAAE,cAAcmF,IAAI,WAAY,WAGlCnF,EAAE,mBAAmByD,QAAQ,OAAQ,WACnCiC,KAAOtE,EAAS,QAChBpB,EAAES,MAAMoF,KAAK,IAAIpE,OAAO,+BAA+BsC,SAAS,2CAA2CmB,OAAO,cAQ9H,QAASY,eAAcC,GACrB,MAAiBC,UAAbD,EACKA,EAASlG,QAAQ,eAAgB,SAASoG,EAAKC,GAAS,MAAOA,KADxE,OAMF,QAASC,UACPC,MAAMC,OAEN5F,KAAK6F,OAASjG,SAASkG,cAAc,UACrC9F,KAAK6F,OAAOxB,UAAY,uBACxBrE,KAAK6F,OAAOE,UAAY,6BACxB/F,KAAK6F,OAAOG,QAAUhG,KAAKiG,QAAQC,KAAKlG,MAExCA,KAAKmG,aAAeR,MAAMS,sBAAsB,aAC9CC,eAAgB,OAChBC,WAAW,IAoBf,QAASC,SACPZ,MAAMC,OAEN5F,KAAK6F,OAASjG,SAASkG,cAAc,UACrC9F,KAAK6F,OAAOxB,UAAY,uBACxBrE,KAAK6F,OAAOE,UAAY,mCACxB/F,KAAK6F,OAAOG,QAAUhG,KAAKiG,QAAQC,KAAKlG,MAExCA,KAAKmG,aAAeR,MAAMS,sBAAsB,gBAC9CC,eAAgB,OAChBC,WAAW,IAqBf,QAASE,SACPxG,KAAK6F,OAASjG,SAASkG,cAAc,UACrC9F,KAAK6F,OAAOxB,UAAY,uBACxBrE,KAAK6F,OAAOE,UAAY,gCACxB/F,KAAK6F,OAAOG,QAAUhG,KAAKiG,QAAQC,KAAKlG,MAEY,IAAhDT,EAAE,mCAAmCmE,QACvCnE,EAAE,QAAQyB,OAAO,qUA6ErB,QAASyF,mBACPlH,EAAGK,UAAWC,GAAG,wBAAyB,gBAAiB,SAASC,GAClE,GAAI4G,GAAUnH,EAAE,6CACZ+F,EAAWD,cAAc9F,EAAE,2BAA4BS,MAAMoF,OAEjE,IAAmB,eAAftF,EAAM6G,KAAuB,CAC/BD,EAAQ7E,SAAS,uCACjBtC,EAAE,yFAAyFyB,OAAO,kCAAkCsE,EAAS,UAE7I,IAAIsB,GAAWrH,EAAES,MAAM6G,QACvBH,GAAQhC,KACNH,IAAOqC,EAASrC,KAAOmC,EAAQI,SAAWvH,EAAES,MAAM8G,UAAU,IAC5DtC,KAAQoC,EAASpC,MAASkC,EAAQ/C,QAAUpE,EAAES,MAAM2D,SAAY,QAIlE+C,GAAQpF,YAAY,uCACpB/B,EAAE,+GAA+G8B,WAOvH,QAAS0F,iBACP,GAAIC,GACAC,EACAC,EACAC,EAAMjC,OAAOkC,cACjB,IAAID,EAAIE,YAAcF,EAAIG,WAAY,CAElC,IADAJ,KACKF,EAAI,EAAGC,EAAME,EAAIG,WAAgBL,EAAJD,EAASA,GAAK,EAC5CE,EAAOzE,KAAK0E,EAAIE,WAAWL,GAE/B,OAAOE,GAEX,MAAO,MAGT,QAASK,kBAAiBC,GACxB,GAAIR,GACAC,EACAE,EAAMjC,OAAOkC,cACjB,IAAII,EAEA,IADAL,EAAIM,kBACCT,EAAI,EAAGC,EAAMO,EAAS9D,OAAYuD,EAAJD,EAASA,GAAK,EAC7CG,EAAIO,SAASF,EAASR,IAKhC,QAASxG,qBACPF,OAAS,GAAIqH,cAAa,gBACxBC,SAAU,OAAQ,SAAU,QAAS,OAAQ,SAAU,cAAe,gBAAiB,UAAW,UAAW,OAAQ,QAAS,UAC9HC,aAAe,cACfC,gBAAgB,EAChBC,iBAAiB,EACjB5F,YAAc,+CACd6F,YACEC,KAAQ,GAAIzB,OACZ9E,MAAS,GAAI6E,OACb2B,OAAU,GAAIxC,WAKpB,QAASyC,iBACP5I,EAAE,gBAAgBkC,KAAK,SAASC,EAAOC,GACrCpC,EAAE,4BAA4ByC,MAC9B,IAAIM,GAAK/C,EAAEoC,GAASvB,KAAK,MAAMmC,OAAO,GAClC6F,EAAO7I,EAAEoC,GAASyD,OAAOiD,MAC7B9I,GAAE,aAAa+C,GAAI8C,KAAKgD,KAI5B,QAASE,gBACP,GAAIC,GAAgBhJ,EAAEC,SAASC,IAAI,iBAEb,gBAAlB8I,IACFhJ,EAAE,2DAA2DiJ,YAAY,UACzEjJ,EAAE,wBAAwBiJ,YAAY,YACtCjJ,EAAE,gBAAgBkJ,OAGE,YAAlBF,IACF/H,oBAEAjB,EAAE,QAAQM,GAAG,QAAS,eAAgBsI,gBAQxC5I,EAAE,yBAAyBM,GAAG,QAAS,SAASC,GAC9CP,EAAE,2DAA2DiJ,YAAY,UACzEjJ,EAAE,wBAAwBiJ,YAAY,YAElCjJ,EAAES,MAAM0I,SAAS,YACJnD,SAAXjF,OACFE,oBAEAF,OAAOqI,WAETpJ,EAAEC,SAASa,IAAI,iBAAkB,WACjCd,EAAE,QAAQM,GAAG,QAAS,eAAgBsI,iBAEtCA,gBACA7H,OAAOC,aACPhB,EAAEC,SAASa,IAAI,iBAAkB,cACjCd,EAAE,QAAQkJ,IAAI,QAAS,eAAgBN,gBAEzCrI,EAAMK,mBA1fV,GAAI8E,MACA3E,OACAsI,eACAtD,SACAuD,aAEJtJ,GAAEuJ,GAAGC,QACLC,cAAe,SAASC,GACtB,MAAOjJ,MAAKyB,KAAK,SAASuF,GACxB,GAAIpH,SAASsJ,UAAW,CAEtBlJ,KAAK8B,OACL,IAAIqF,GAAMvH,SAASsJ,UAAUC,aAC7BhC,GAAIiB,KAAOa,EACXjJ,KAAK8B,YAEF,IAAI9B,KAAKoJ,gBAAyC,KAAvBpJ,KAAKoJ,eAAuB,CAE1D,GAAIC,GAAWrJ,KAAKoJ,eAChBE,EAAStJ,KAAKuJ,aACdC,EAAYxJ,KAAKwJ,SACrBxJ,MAAKyF,MAAQzF,KAAKyF,MAAMgE,UAAU,EAAGJ,GAAUJ,EAAQjJ,KAAKyF,MAAMgE,UAAUH,EAAOtJ,KAAKyF,MAAM/B,QAC9F1D,KAAK8B,QACL9B,KAAKoJ,eAAiBC,EAAWJ,EAAQvF,OACzC1D,KAAKuJ,aAAeF,EAAWJ,EAAQvF,OACvC1D,KAAKwJ,UAAYA,MAEjBxJ,MAAKyF,OAASwD,EACdjJ,KAAK8B,aA8GXvC,EAAE,mBAAmBM,GAAG,QAAS,SAAU6J,GACzCnK,EAAE,iBAAiBkC,KAAK,WACtB,MAAKlC,GAAES,MAAM2J,GAAGD,EAAE5E,SAA4C,IAAjCvF,EAAES,MAAM4J,IAAIF,EAAE5E,QAAQpB,QAAuD,IAAvCnE,EAAE,YAAYqK,IAAIF,EAAE5E,QAAQpB,OAA/F,WACEnE,GAAES,MAAME,QAAQ,YAyHtBwF,OAAOmE,UAAU5D,QAAU,SAAS6D,GAClC9J,KAAKmG,aAAa4D,mBAGpBrE,OAAOmE,UAAUG,UAAY,WAC3B,MAAOhK,MAAK6F,QAGdH,OAAOmE,UAAUI,WAAa,SAAUH,GACtC,GAAIA,GAAOvK,EAAEuK,EACTA,GAAKpB,SAAS,cAChB1I,KAAK6F,OAAOqE,UAAUC,IAAI,gCAmB9B5D,MAAMsD,UAAU5D,QAAU,SAAS6D,GACjC9J,KAAKmG,aAAa4D,mBAGpBxD,MAAMsD,UAAUG,UAAY,WAC1B,MAAOhK,MAAK6F,QAGdU,MAAMsD,UAAUI,WAAa,SAAUH,GACrC,GAAIA,GAAOvK,EAAEuK,EACTA,GAAKpB,SAAS,iBAChB1I,KAAK6F,OAAOqE,UAAUC,IAAI,gCAiB9B3D,MAAMqD,UAAU5D,QAAU,SAAS6D,GACoB,IAAjDvK,EAAE,oCAAoCmE,SACxCnE,EAAE,0BAA0ByB,OAAO,uRACuB,IAAtDzB,EAAE,0CAA0C6F,QAAkC,KAAlByD,eAC9DtJ,EAAE,0CAA0C6F,KAAKyD,gBAIrDD,eAAiB7B,gBAEjBzG,OAAO8J,eAAeC,MAAMC,QAAU,OACtC/K,EAAE,oCAAoCyC,OACtC1B,OAAOiK,kBAAmB,EAC1BhL,EAAE,0CAA0CuC,QAE5CvC,EAAE,sCAAsCM,GAAG,QAAS,SAAUC,GAC5D,IAAKP,EAAES,MAAM0I,SAAS,gBAAiB,CACrC5I,EAAMK,iBACNG,OAAOkK,qBACPjL,EAAE,oCAAoCqD,OACtCrD,EAAE,0CAA0C6F,KAAK,IAEjDmC,iBAAiBqB,eACjB,IAAItD,GAAW1F,SAASwH,eAAeqD,WAAWC,UAClD,IAAInL,EAAE+F,GAAUoD,SAAS,gBAAiB,CACxC,GAAIN,GAAOxI,SAASwH,eAAeqD,WAAWE,SAC9CrF,GAASjE,SACTzB,SAASgL,YAAY,cAAc,EAAOxC,OAKhD7I,EAAE,mDAAmDM,GAAG,QAAS,SAAUC,GACvE,GAAImI,GAAO1I,EAAE,0CAA0C6F,MACvD7F,GAAE,mDAAmD6F,KAAK6C,GAC1DnI,EAAMK,iBACNZ,EAAE+F,UAAUjE,SACZkG,iBAAiBqB,eACjB,IAAInD,GAAQwC,CACZ,IAAIxC,EAAO,CACToF,mBAAmB,8BAA8BjL,SAASwH,eAAe,6CAA6C3B,EAAM,mBAAmB,EAE/I,IAAIqF,GAAyBvL,EAAE,8BACO,KAAlCuL,EAAuBpH,QACzBnE,EAAE,+BAA+BkC,KAAK,SAASC,EAAOC,GACpDpC,EAAES,MAAMD,SAASgL,YAAYxL,EAAES,SAIrCM,OAAO0K,qBACPzL,EAAE,oCAAoCqD,OACtCrD,EAAE,0CAA0C6F,KAAK,OAIvDoB,MAAMqD,UAAUG,UAAY,WAC1B,MAAOhK,MAAK6F,QAGdW,MAAMqD,UAAUI,WAAa,SAAUH,GACrC,GAAIA,GAAOvK,EAAEuK,EACTA,GAAKpB,SAAS,mBACCnD,SAAbD,UAAuC,OAAbA,UAAkC,KAAbA,YACjDA,SAAW/F,EAAE,2BAA4BuK,IAE3CjB,cAAgBtJ,EAAE,2BAA4BuK,GAAMmB,QAAQ7F,OAC5DyD,cAAgBxD,cAAcwD,eAC9BtJ,EAAE,0CAA0C6F,KAAKyD,eAEjD7I,KAAK6F,OAAOqE,UAAUC,IAAI,iCAyH9B5K,EAAEK,UAAUsL,MAAM,WAChB5C,eACAjJ,cACA4C,cACAwE,kBACAxD,kBAEA1D,EAAE,QAAQW,SACRiL,SAAU,kBACV/F,MAAK"}