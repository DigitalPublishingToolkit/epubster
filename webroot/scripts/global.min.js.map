{"version":3,"file":"global.min.js","sources":["global.js"],"names":["slugify","slug","toLowerCase","replace","sectionTabs","currentTab","$","jStorage","get","tab","currentSectionTab","document","on","event","parent","this","parents","popover","preventDefault","attr","set","editor","deactivate","setupMediumEditor","clickedElement","href","response","tabTitle","val","tabSlug","insertBefore","append","count","match","parseInt","alteredHref","remove","removeClass","error","emptyInput","each","index","element","formGroup","addClass","focus","closest","show","sectionSort","sortable","placeholder","stop","sectionOrder","id","substr","order","push","JSON","stringify","hide","disableSelection","sectionDelete","parse","fadeOut","generateEdition","generateEPUB","download","ajax","url","SITE_URL","beforeSend","opts","lines","length","width","radius","corners","rotate","direction","color","speed","trail","shadow","hwaccel","className","zIndex","top","left","fadeIn","css","spinner","Spinner","spin","target","getElementById","success","epub","window","location","html","cleanFootnote","footnote","undefined","str","value","Person","rangy","init","button","createElement","innerHTML","onclick","onClick","bind","classApplier","createCssClassApplier","elementTagName","normalize","Index","Notes","previewFootnote","preview","type","boundary","offset","height","saveSelection","i","len","ranges","sel","getSelection","getRangeAt","rangeCount","restoreSelection","savedSel","removeAllRanges","addRange","MediumEditor","buttons","buttonLabels","forcePlainText","extensions","note","person","copyTextfield","text","trim","setupEditors","currentEditor","toggleClass","off","hasClass","activate","savedSelection","footnoteValue","fn","extend","insertAtCaret","myValue","selection","createRange","selectionStart","startPos","endPos","selectionEnd","scrollTop","substring","e","is","has","prototype","node","toggleSelection","getButton","checkState","classList","add","toolbarActions","style","display","keepToolbarAlive","showToolbarActions","anchorNode","parentNode","nodeValue","execCommand","insertHTMLAtCursor","doubleWrappedFootnotes","replaceWith","hideToolbarActions","first","ready","selector"],"mappings":"AAkCA,QAASA,SAAQC,GACf,MAAOA,GACAC,cACAC,QAAQ,SAAS,IACjBA,QAAQ,WAAW,KACnBA,QAAQ,MAAM,KAGvB,QAASC,eACP,GAAIC,GAAaC,EAAEC,SAASC,IAAI,eAC5BH,IACFC,EAAE,yBAAyBD,EAAW,MAAMI,IAAI,OAGlD,IAAIC,GAAoBJ,EAAEC,SAASC,IAAI,uBACnCE,IACFJ,EAAE,yBAAyBI,EAAkB,MAAMD,IAAI,QAGzDH,EAAEK,UAAUC,GAAG,QAAS,0DAA2D,SAAUC,GAC3F,GAAIC,GAASR,EAAES,MAAMC,QAAQ,KAC7BV,GAAE,iBAAiBW,QAAQ,WAC3BJ,EAAMK,iBACNZ,EAAES,MAAMN,IAAI,QAEc,iBAAtBK,EAAOK,KAAK,MACdb,EAAEC,SAASa,IAAI,uBAAwBd,EAAES,MAAMI,KAAK,SAEpDb,EAAEC,SAASa,IAAI,eAAgBd,EAAES,MAAMI,KAAK,SAG1CE,QACFA,OAAOC,aAETC,sBAGFjB,EAAE,mCAAmCM,GAAG,QAAS,SAAUC,GACzD,GAAIW,GAAiBlB,EAAES,MACnBU,EAAOD,EAAeL,KAAK,OAC/Bb,GAAEE,IAAIiB,EAAM,SAASC,GACnB,GAAIC,GAAWrB,EAAE,sBAAuBoB,GAAUE,MAC9CC,EAAU7B,QAAQ2B,EACtBrB,GAAE,yBAAyBuB,EAAQ,KAAKF,EAAS,QAAQG,aAAa,yBACtExB,EAAE,6BAA6ByB,OAAOL,EACtC,IAAIjB,GAAM,YAAYoB,CACtBvB,GAAE,yBAAyBG,EAAI,MAAMA,IAAI,QAEzCY,OAAOC,aACPC,mBAEA,IAAIS,GAAQP,EAAKQ,MAAM,OACvB,IAAID,EACF,GAAIA,GAAQE,SAASF,EAAM,IAAI,CAEjC,IAAIG,GAAcV,EAAKtB,QAAQ,OAAQ6B,EACvCR,GAAeL,KAAK,OAAQgB,KAE9BtB,EAAMK,mBAGRZ,EAAE,0BAA0BM,GAAG,SAAU,WACvC,GAAIH,GAAM,YAAYH,EAAES,MAAMa,KAC9BtB,GAAE,yBAAyBG,EAAI,MAAMA,IAAI,QAEzCY,OAAOC,aACPC,sBAIFjB,EAAE,yCAAyCM,GAAG,QAAS,SAASC,GAC9DP,EAAE,0BAA0B8B,SAC5B9B,EAAE,iBAAiB+B,YAAY,eAAeA,YAAY,aAAaA,YAAY,eAEnF,IAAIC,GAAQ,EACRC,EAAa,EAiBjB,IAhBAjC,EAAE,mBAAoB,kBAAkBkC,KAAK,SAASC,EAAOC,GAC3D,GAAIC,GAAYrC,EAAES,MAAMC,QAAQ,cAChC2B,GAAUC,SAAS,gBAEC,IAAjBtC,EAAES,MAAMa,OACTe,EAAUC,SAAS,aAAab,OAAO,yDACzB,IAAVU,IACFF,EAAajC,EAAES,OAEL,GAATuB,GAAahC,EAAES,MAAM8B,QACxBP,EAAQ,GAERK,EAAUC,SAAS,eAAeb,OAAO,oEAIhC,GAATO,EAAY,CACVC,GACFA,EAAWM,OAEb,IAAIpC,GAAM8B,EAAWO,QAAQ,aAAa3B,KAAK,KAC/Cb,GAAE,0BAA4BG,EAAM,MAAMA,IAAI,QAC9CH,EAAE,0BAA0ByC,OAC5BlC,EAAMK,oBAcZ,QAAS8B,eACP1C,EAAG,oBAAqB2C,UACtBC,YAAa,qBACbC,KAAO,WACL,GAAIC,KACJ9C,GAAE,yBAAyBkC,KAAK,SAASC,EAAOC,GAC9C,GAAIW,GAAK/C,EAAEoC,GAASvB,KAAK,MAAMmC,OAAO,GAClCC,GAASF,GAAKA,EAAIE,MAAQd,EAAM,EACpCW,GAAaI,KAAKD,IAEpB,IAAIH,GAAeK,KAAKC,UAAUN,EAClC9C,GAAE,8BAA8BsB,IAAIwB,GACpC9C,EAAE,oCAAoCyC,OACtCzC,EAAE,0CAA0CqD,UAGhDrD,EAAG,oBAAqBsD,mBAExBtD,EAAE,oCAAoCM,GAAG,QAAS,SAASC,GACzD,GAAIwC,GAAK/C,EAAES,MAAMI,KAAK,MAAMmC,OAAO,IAC/BO,EAAgBvD,EAAE,+BAA+BsB,KACrD,IAAIiC,EACF,GAAIA,GAAgBJ,KAAKK,MAAMD,OAE/B,IAAIA,KAENA,GAAcL,KAAKH,EACnB,IAAIQ,GAAgBJ,KAAKC,UAAUG,EACnCvD,GAAE,+BAA+BsB,IAAIiC,GAErCvD,EAAES,MAAMD,SAASiD,QAAQ,OAAQ,WAC/BzD,EAAES,MAAMqB,WAEVvB,EAAMK,mBAIV,QAAS8C,mBACP1D,EAAE,kBAAkBM,GAAG,QAAS,SAASC,GACvC,GAAIwC,GAAK/C,EAAE,cAAcsB,KACzBqC,cAAaZ,GAAI,GACjBxC,EAAMK,mBAIV,QAAS+C,cAAaZ,EAAIa,GACxB5D,EAAE6D,MACAC,IAAKC,SAAS,qBAAqBhB,EACnCiB,WAAa,WACX,GAAIC,IACFC,MAAO,GACPC,OAAQ,EACRC,MAAO,EACPC,OAAQ,EACRC,QAAS,EACTC,OAAQ,EACRC,UAAW,EACXC,MAAO,OACPC,MAAO,EACPC,MAAO,GACPC,QAAQ,EACRC,SAAS,EACTC,UAAW,UACXC,OAAQ,IACRC,IAAK,OACLC,KAAM,OAER,IAAIrB,EACF5D,EAAE,2BAA2BkF,OAAO,QACpClF,EAAE,cAAcmF,IAAI,WAAY,cAEhC,IAAIC,GAAU,GAAIC,SAAQpB,GAAMqB,KAAKC,GACjCA,EAASlF,SAASmF,eAAe,mBAGzCC,QAAU,SAASrE,GACbA,IACEwC,GACF8B,KAAOtE,EAAS,QAChBuE,OAAOC,SAAS/F,QAAQ6F,MACxB1F,EAAE,2BAA2ByD,QAAQ,OAAQ,WAC3CzD,EAAE,cAAcmF,IAAI,WAAY,WAGlCnF,EAAE,mBAAmByD,QAAQ,OAAQ,WACnCiC,KAAOtE,EAAS,QAChBpB,EAAES,MAAMoF,KAAK,IAAIpE,OAAO,+BAA+BsC,SAAS,2CAA2CmB,OAAO,cAQ9H,QAASY,eAAcC,GACrB,MAAiBC,UAAbD,EACKA,EAASlG,QAAQ,eAAgB,SAASoG,EAAKC,GAAS,MAAOA,KADxE,OAMF,QAASC,UACPC,MAAMC,OAEN5F,KAAK6F,OAASjG,SAASkG,cAAc,UACrC9F,KAAK6F,OAAOxB,UAAY,uBACxBrE,KAAK6F,OAAOE,UAAY,6BACxB/F,KAAK6F,OAAOG,QAAUhG,KAAKiG,QAAQC,KAAKlG,MAExCA,KAAKmG,aAAeR,MAAMS,sBAAsB,aAC9CC,eAAgB,OAChBC,WAAW,IAoBf,QAASC,SACPZ,MAAMC,OAEN5F,KAAK6F,OAASjG,SAASkG,cAAc,UACrC9F,KAAK6F,OAAOxB,UAAY,uBACxBrE,KAAK6F,OAAOE,UAAY,mCACxB/F,KAAK6F,OAAOG,QAAUhG,KAAKiG,QAAQC,KAAKlG,MAExCA,KAAKmG,aAAeR,MAAMS,sBAAsB,gBAC9CC,eAAgB,OAChBC,WAAW,IAqBf,QAASE,SACPxG,KAAK6F,OAASjG,SAASkG,cAAc,UACrC9F,KAAK6F,OAAOxB,UAAY,uBACxBrE,KAAK6F,OAAOE,UAAY,gCACxB/F,KAAK6F,OAAOG,QAAUhG,KAAKiG,QAAQC,KAAKlG,MAEY,IAAhDT,EAAE,mCAAmCmE,QACvCnE,EAAE,QAAQyB,OAAO,qUA6ErB,QAASyF,mBACPlH,EAAGK,UAAWC,GAAG,wBAAyB,gBAAiB,SAASC,GAClE,GAAI4G,GAAUnH,EAAE,6CACZ+F,EAAWD,cAAc9F,EAAE,2BAA4BS,MAAMoF,OAEjE,IAAmB,eAAftF,EAAM6G,KAAuB,CAC/BD,EAAQ7E,SAAS,uCACjBtC,EAAE,yFAAyFyB,OAAO,kCAAkCsE,EAAS,UAE7I,IAAIsB,GAAWrH,EAAES,MAAM6G,QACvBH,GAAQhC,KACNH,IAAOqC,EAASrC,KAAOmC,EAAQI,SAAWvH,EAAES,MAAM8G,UAAU,IAC5DtC,KAAQoC,EAASpC,MAASkC,EAAQ/C,QAAUpE,EAAES,MAAM2D,SAAY,QAIlE+C,GAAQpF,YAAY,uCACpB/B,EAAE,+GAA+G8B,WAOvH,QAAS0F,iBACP,GAAIC,GACAC,EACAC,EACAC,EAAMjC,OAAOkC,cACjB,IAAID,EAAIE,YAAcF,EAAIG,WAAY,CAElC,IADAJ,KACKF,EAAI,EAAGC,EAAME,EAAIG,WAAgBL,EAAJD,EAASA,GAAK,EAC5CE,EAAOzE,KAAK0E,EAAIE,WAAWL,GAE/B,OAAOE,GAEX,MAAO,MAGT,QAASK,kBAAiBC,GACxB,GAAIR,GACAC,EACAE,EAAMjC,OAAOkC,cACjB,IAAII,EAEA,IADAL,EAAIM,kBACCT,EAAI,EAAGC,EAAMO,EAAS9D,OAAYuD,EAAJD,EAASA,GAAK,EAC7CG,EAAIO,SAASF,EAASR,IAKhC,QAASxG,qBACPF,OAAS,GAAIqH,cAAa,gBACxBC,SAAU,OAAQ,SAAU,QAAS,OAAQ,SAAU,cAAe,gBAAiB,UAAW,UAAW,OAAQ,QAAS,UAC9HC,aAAe,cACfC,gBAAgB,EAChB3F,YAAc,+CACd4F,YACEC,KAAQ,GAAIxB,OACZ9E,MAAS,GAAI6E,OACb0B,OAAU,GAAIvC,WAKpB,QAASwC,iBACP3I,EAAE,gBAAgBkC,KAAK,SAASC,EAAOC,GACrCpC,EAAE,4BAA4ByC,MAC9B,IAAIM,GAAK/C,EAAEoC,GAASvB,KAAK,MAAMmC,OAAO,GAClC4F,EAAO5I,EAAEoC,GAASyD,OAAOgD,MAC7B7I,GAAE,aAAa+C,GAAI8C,KAAK+C,KAI5B,QAASE,gBACP,GAAIC,GAAgB/I,EAAEC,SAASC,IAAI,iBAEb,gBAAlB6I,IACF/I,EAAE,2DAA2DgJ,YAAY,UACzEhJ,EAAE,wBAAwBgJ,YAAY,YACtChJ,EAAE,gBAAgBiJ,OAGE,YAAlBF,IACF9H,oBAEAjB,EAAE,QAAQM,GAAG,QAAS,eAAgBqI,gBAQxC3I,EAAE,yBAAyBM,GAAG,QAAS,SAASC,GAC9CP,EAAE,2DAA2DgJ,YAAY,UACzEhJ,EAAE,wBAAwBgJ,YAAY,YAElChJ,EAAES,MAAMyI,SAAS,YACJlD,SAAXjF,OACFE,oBAEAF,OAAOoI,WAETnJ,EAAEC,SAASa,IAAI,iBAAkB,WACjCd,EAAE,QAAQM,GAAG,QAAS,eAAgBqI,iBAEtCA,gBACA5H,OAAOC,aACPhB,EAAEC,SAASa,IAAI,iBAAkB,cACjCd,EAAE,QAAQiJ,IAAI,QAAS,eAAgBN,gBAEzCpI,EAAMK,mBAzfV,GAAI8E,MACA3E,OACAqI,eACArD,SACAsD,aAEJrJ,GAAEsJ,GAAGC,QACLC,cAAe,SAASC,GACtB,MAAOhJ,MAAKyB,KAAK,SAASuF,GACxB,GAAIpH,SAASqJ,UAAW,CAEtBjJ,KAAK8B,OACL,IAAIqF,GAAMvH,SAASqJ,UAAUC,aAC7B/B,GAAIgB,KAAOa,EACXhJ,KAAK8B,YAEF,IAAI9B,KAAKmJ,gBAAyC,KAAvBnJ,KAAKmJ,eAAuB,CAE1D,GAAIC,GAAWpJ,KAAKmJ,eAChBE,EAASrJ,KAAKsJ,aACdC,EAAYvJ,KAAKuJ,SACrBvJ,MAAKyF,MAAQzF,KAAKyF,MAAM+D,UAAU,EAAGJ,GAAUJ,EAAQhJ,KAAKyF,MAAM+D,UAAUH,EAAOrJ,KAAKyF,MAAM/B,QAC9F1D,KAAK8B,QACL9B,KAAKmJ,eAAiBC,EAAWJ,EAAQtF,OACzC1D,KAAKsJ,aAAeF,EAAWJ,EAAQtF,OACvC1D,KAAKuJ,UAAYA,MAEjBvJ,MAAKyF,OAASuD,EACdhJ,KAAK8B,aA8GXvC,EAAE,mBAAmBM,GAAG,QAAS,SAAU4J,GACzClK,EAAE,iBAAiBkC,KAAK,WACtB,MAAKlC,GAAES,MAAM0J,GAAGD,EAAE3E,SAA4C,IAAjCvF,EAAES,MAAM2J,IAAIF,EAAE3E,QAAQpB,QAAuD,IAAvCnE,EAAE,YAAYoK,IAAIF,EAAE3E,QAAQpB,OAA/F,WACEnE,GAAES,MAAME,QAAQ,YAyHtBwF,OAAOkE,UAAU3D,QAAU,SAAS4D,GAClC7J,KAAKmG,aAAa2D,mBAGpBpE,OAAOkE,UAAUG,UAAY,WAC3B,MAAO/J,MAAK6F,QAGdH,OAAOkE,UAAUI,WAAa,SAAUH,GACtC,GAAIA,GAAOtK,EAAEsK,EACTA,GAAKpB,SAAS,cAChBzI,KAAK6F,OAAOoE,UAAUC,IAAI,gCAmB9B3D,MAAMqD,UAAU3D,QAAU,SAAS4D,GACjC7J,KAAKmG,aAAa2D,mBAGpBvD,MAAMqD,UAAUG,UAAY,WAC1B,MAAO/J,MAAK6F,QAGdU,MAAMqD,UAAUI,WAAa,SAAUH,GACrC,GAAIA,GAAOtK,EAAEsK,EACTA,GAAKpB,SAAS,iBAChBzI,KAAK6F,OAAOoE,UAAUC,IAAI,gCAiB9B1D,MAAMoD,UAAU3D,QAAU,SAAS4D,GACoB,IAAjDtK,EAAE,oCAAoCmE,SACxCnE,EAAE,0BAA0ByB,OAAO,uRACuB,IAAtDzB,EAAE,0CAA0C6F,QAAkC,KAAlBwD,eAC9DrJ,EAAE,0CAA0C6F,KAAKwD,gBAIrDD,eAAiB5B,gBAEjBzG,OAAO6J,eAAeC,MAAMC,QAAU,OACtC9K,EAAE,oCAAoCyC,OACtC1B,OAAOgK,kBAAmB,EAC1B/K,EAAE,0CAA0CuC,QAE5CvC,EAAE,sCAAsCM,GAAG,QAAS,SAAUC,GAC5D,IAAKP,EAAES,MAAMyI,SAAS,gBAAiB,CACrC3I,EAAMK,iBACNG,OAAOiK,qBACPhL,EAAE,oCAAoCqD,OACtCrD,EAAE,0CAA0C6F,KAAK,IAEjDmC,iBAAiBoB,eACjB,IAAIrD,GAAW1F,SAASwH,eAAeoD,WAAWC,UAClD,IAAIlL,EAAE+F,GAAUmD,SAAS,gBAAiB,CACxC,GAAIN,GAAOvI,SAASwH,eAAeoD,WAAWE,SAC9CpF,GAASjE,SACTzB,SAAS+K,YAAY,cAAc,EAAOxC,OAKhD5I,EAAE,mDAAmDM,GAAG,QAAS,SAAUC,GACvE,GAAIkI,GAAOzI,EAAE,0CAA0C6F,MACvD7F,GAAE,mDAAmD6F,KAAK4C,GAC1DlI,EAAMK,iBACNZ,EAAE+F,UAAUjE,SACZkG,iBAAiBoB,eACjB,IAAIlD,GAAQuC,CACZ,IAAIvC,EAAO,CACTmF,mBAAmB,8BAA8BhL,SAASwH,eAAe,6CAA6C3B,EAAM,mBAAmB,EAE/I,IAAIoF,GAAyBtL,EAAE,8BACO,KAAlCsL,EAAuBnH,QACzBnE,EAAE,+BAA+BkC,KAAK,SAASC,EAAOC,GACpDpC,EAAES,MAAMD,SAAS+K,YAAYvL,EAAES,SAIrCM,OAAOyK,qBACPxL,EAAE,oCAAoCqD,OACtCrD,EAAE,0CAA0C6F,KAAK,OAIvDoB,MAAMoD,UAAUG,UAAY,WAC1B,MAAO/J,MAAK6F,QAGdW,MAAMoD,UAAUI,WAAa,SAAUH,GACrC,GAAIA,GAAOtK,EAAEsK,EACTA,GAAKpB,SAAS,mBACClD,SAAbD,UAAuC,OAAbA,UAAkC,KAAbA,YACjDA,SAAW/F,EAAE,2BAA4BsK,IAE3CjB,cAAgBrJ,EAAE,2BAA4BsK,GAAMmB,QAAQ5F,OAC5DwD,cAAgBvD,cAAcuD,eAC9BrJ,EAAE,0CAA0C6F,KAAKwD,eAEjD5I,KAAK6F,OAAOoE,UAAUC,IAAI,iCAwH9B3K,EAAEK,UAAUqL,MAAM,WAChB5C,eACAhJ,cACA4C,cACAwE,kBACAxD,kBAEA1D,EAAE,QAAQW,SACRgL,SAAU,kBACV9F,MAAK"}